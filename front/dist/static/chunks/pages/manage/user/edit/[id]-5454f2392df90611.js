(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{62994:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/user/edit/[id]",function(){return r(97188)}])},95618:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(85893),s=r(74798);let a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=e=>{let{register:t,formState:{errors:r},isPasswordRequired:i=!1}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{...t("email",{required:"Email is required!",pattern:{value:a,message:"Please enter a valid email"}}),placeholder:"E-mail",error:r.email}),(0,n.jsx)(s.Z,{...t("password",i?{required:"Password is required",minLength:{value:6,message:"Min length should be 6 symbols"}}:{}),type:"password",placeholder:"Password",error:r.password})]})};var o=i},66263:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(85893),s=r(67933),a=r.n(s),i=r(41664),o=r.n(i),l=r(94184),c=r.n(l),u=r(11163);let d=e=>{let{item:{title:t,link:r}}=e,{asPath:s}=(0,u.useRouter)();return(0,n.jsx)("li",{children:(0,n.jsx)(o(),{legacyBehavior:!0,href:r,children:(0,n.jsx)("a",{className:c()({[a().active]:s===r}),children:t})})})};var m=r(36470);let p=[{title:"Statistics",link:(0,m.wk)()},{title:"Users",link:(0,m.A7)("users")},{title:"Movies",link:(0,m.A7)("movies")},{title:"Actors",link:(0,m.A7)("actors")},{title:"Genres",link:(0,m.A7)("genres")}],_=()=>(0,n.jsx)("nav",{className:a().nav,children:(0,n.jsx)("ul",{children:p.map(e=>(0,n.jsx)(d,{item:e},e.link))})});var f=_},23141:function(e,t,r){"use strict";var n=r(85893),s=r(94184),a=r.n(s),i=r(5130),o=r.n(i);let l=e=>{let{children:t,className:r,...s}=e;return(0,n.jsx)("button",{className:a()(o().button,r),...s,children:t})};t.Z=l},74798:function(e,t,r){"use strict";var n=r(85893),s=r(94184),a=r.n(s),i=r(67294),o=r(5130),l=r.n(o);let c=(0,i.forwardRef)((e,t)=>{var r;let{placeholder:s,error:i,type:o="text",style:c,...u}=e;return(0,n.jsxs)("div",{className:a()(l().common,l().field),style:c,children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("input",{ref:t,type:o,...u})]}),i&&(0,n.jsx)("div",{className:l().error,children:null===(r=i.message)||void 0===r?void 0:r.toString()})]})});c.displayName="Field",t.Z=c},48135:function(e,t,r){"use strict";var n=r(85893);let s=e=>{let{title:t,className:r}=e;return(0,n.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat((null==r?void 0:r.includes("xl"))?"":"text-3xl"," ").concat(r),children:t})};t.Z=s},80774:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var n=r(4754),s=r(81759);let a={getAll:async e=>s.ZP.get((0,n.Il)(""),{params:e?{searchTerm:e}:{}}),getProfile:async()=>s.ZP.get((0,n.Il)("/profile")),getFavorites:async()=>s.ZP.get((0,n.Il)("profile/favorites")),toggleFavorite:async e=>s.ZP.put((0,n.Il)("profile/favorites"),{movieId:e}),updateProfile:async e=>s.ZP.put((0,n.Il)("/profile"),e),getById:async e=>s.ZP.get((0,n.Il)("/".concat(e))),update:async(e,t)=>s.ZP.put((0,n.Il)("/".concat(e)),t),deleteUser:async e=>s.ZP.delete((0,n.Il)("/".concat(e)))}},79671:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(85893),s=r(9008),a=r.n(s),i=r(11163),o=r(28975);let l="Online cinema",c=e=>"".concat(e," | ").concat(l),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.replace(/<[^>]+>/g,"").replace(/&[^;]+>./g," ").replace(/([\u2700-\u27BF] | [\uE000-\uF8FF] | \uD83C[\uDC00-\uDFFF] | \uD83D[\uDC00-\uDFFF] | [\u2011-\u26FF] | \uD83E[\uDD10-\uDDFF])/g,"");return t&&(r=r.slice(0,t)+"..."),r};var d=r(83454);let m=e=>{let{title:t,description:r,image:s,children:m}=e,{asPath:p}=(0,i.useRouter)(),_="".concat(d.env.REACT_APP_URL).concat(p);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{itemProp:"headline",children:c(t)}),r?(0,n.jsxs)(a(),{children:[(0,n.jsx)("meta",{itemProp:"description",name:"description",content:u(r,152)}),(0,n.jsx)("link",{rel:"canonical",href:_}),(0,n.jsx)("meta",{property:"og:locale",content:"en"}),(0,n.jsx)("meta",{property:"og:title",content:c(t)}),(0,n.jsx)("meta",{property:"og:url",content:_}),(0,n.jsx)("meta",{property:"og:image",content:s||o.Z}),(0,n.jsx)("meta",{property:"og:site_name",content:l}),(0,n.jsx)("meta",{property:"og:description",content:u(r,197)})]}):(0,n.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),m]})};var p=m},97188:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(85893);r(36973);var s=r(87536),a=r(66263),i=r(23141),o=r(48135),l=r(68347),c=r(79671),u=r(95618),d=r(36470),m=r(80774),p=r(44460),_=r(11163),f=r(88767),x=r(16938);let v=e=>{let{push:t,query:r}=(0,_.useRouter)(),n=String(r.id),{isLoading:s}=(0,f.useQuery)(["user",n],()=>m.W.getById(n),{onSuccess:t=>{let{data:r}=t;e("email",r.email),e("isAdmin",r.isAdmin)},onError:e=>{(0,p._)(e,"Get user")},enabled:!!r.id}),{mutateAsync:a}=(0,f.useMutation)("update user",e=>m.W.update(n,e),{onError:e=>{(0,p._)(e,"Update user")},onSuccess:()=>{x.Rt.success("Update user","Update was successful"),t((0,d.A7)("users"))}}),i=async e=>{await a(e)};return{onSubmit:i,isLoading:s}},g=()=>{let{handleSubmit:e,register:t,formState:r,setValue:d,control:m}=(0,s.cI)({mode:"onChange"}),{isLoading:p,onSubmit:_}=v(d);return(0,n.jsxs)(c.Z,{title:"Edit user",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)(o.Z,{title:"Edit user"}),(0,n.jsx)("form",{onSubmit:e(_),className:"admin-form",children:p?(0,n.jsx)(l.Z,{count:3}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{register:t,formState:r}),(0,n.jsx)(s.Qr,{control:m,name:"isAdmin",render:e=>{let{field:t}=e;return(0,n.jsx)("button",{onClick:e=>{e.preventDefault(),t.onChange(!t.value)},className:"text-link block mb-7",children:t.value?"Make it regular user":"Make it admin"})}}),(0,n.jsx)(i.Z,{children:"Update"})]})})]})},j=()=>(0,n.jsx)(g,{});j.isOnlyAdmin=!0;var h=j},36973:function(){},67933:function(e){e.exports={nav:"adminNavigation_nav___TpNr",active:"adminNavigation_active__da2_u"}},5130:function(e){e.exports={button:"form_button__yOLwy",common:"form_common__Y25KB",field:"form_field__MfP1o",uploadField:"form_uploadField__SfNcG",uploadFlex:"form_uploadFlex___EJSQ",uploadImageContainer:"form_uploadImageContainer__WmFzh",fade:"form_fade__luiBw",error:"form_error__sUS7j",editorWrapper:"form_editorWrapper__kd_SU",wrapper:"form_wrapper___Lju1",toolbar:"form_toolbar__nAnM_",editor:"form_editor__uwQTO"}}},function(e){e.O(0,[536,66,774,888,179],function(){return e(e.s=62994)}),_N_E=e.O()}]);