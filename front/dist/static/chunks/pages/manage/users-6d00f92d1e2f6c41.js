(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{56520:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return n(58577)}])},66263:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(85893),i=n(67933),s=n.n(i),a=n(41664),l=n.n(a),o=n(94184),c=n.n(o),u=n(11163);let d=e=>{let{item:{title:t,link:n}}=e,{asPath:i}=(0,u.useRouter)();return(0,r.jsx)("li",{children:(0,r.jsx)(l(),{legacyBehavior:!0,href:n,children:(0,r.jsx)("a",{className:c()({[s().active]:i===n}),children:t})})})};var m=n(36470);let _=[{title:"Statistics",link:(0,m.wk)()},{title:"Users",link:(0,m.A7)("users")},{title:"Movies",link:(0,m.A7)("movies")},{title:"Actors",link:(0,m.A7)("actors")},{title:"Genres",link:(0,m.A7)("genres")}],f=()=>(0,r.jsx)("nav",{className:s().nav,children:(0,r.jsx)("ul",{children:_.map(e=>(0,r.jsx)(d,{item:e},e.link))})});var p=f},85903:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(85893),i=n(52240),s=n(23141);let a=e=>{let{onClick:t}=e;return(0,r.jsx)(s.Z,{onClick:t,children:"Create new"})};var l=n(46652),o=n.n(l);let c=e=>{let{handleSearch:t,onClick:n,searchTerm:s}=e;return(0,r.jsxs)("div",{className:o().header,children:[(0,r.jsx)(i.Z,{searchTerm:s,handleSearch:t}),n&&(0,r.jsx)(a,{onClick:n})]})};var u=c},98561:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(85893),i=n(68347),s=n(94184),a=n.n(s),l=n(47156),o=n.n(l);a();let c=e=>{let{headerItems:t}=e;return(0,r.jsxs)("div",{className:a()(o().item,o().itemHeader),children:[t.map(e=>(0,r.jsxs)("div",{children:[e," "]},e)),(0,r.jsx)("div",{children:"Actions"})]})};var u=n(3872),d=n(11163);let m=e=>{let{editUrl:t,removeHandler:n}=e,{push:i}=(0,d.useRouter)();return(0,r.jsxs)("div",{className:o().actions,children:[(0,r.jsx)("button",{onClick:()=>i(t),children:(0,r.jsx)(u.O,{name:"MdEdit"})}),(0,r.jsx)("button",{onClick:n,children:(0,r.jsx)(u.O,{name:"MdClose"})})]})},_=e=>{let{removeHandler:t,tableItem:n}=e,i=0;return(0,r.jsxs)("div",{className:o().item,children:[n.items.map(e=>(0,r.jsx)("div",{children:e},e+i++)),(0,r.jsx)(m,{editUrl:n.editUrl,removeHandler:t})]})},f=e=>{let{tableItems:t,headerItems:n,isLoading:s,removeHandler:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(c,{headerItems:n}),s?(0,r.jsx)(i.Z,{count:1,height:48,className:"mt-4"}):t.length?t.map(e=>(0,r.jsx)(_,{removeHandler:()=>a(e._id),tableItem:e},e._id)):(0,r.jsx)("div",{className:o().notFound,children:"Elements not found"})]})};var p=f},23141:function(e,t,n){"use strict";var r=n(85893),i=n(94184),s=n.n(i),a=n(5130),l=n.n(a);let o=e=>{let{children:t,className:n,...i}=e;return(0,r.jsx)("button",{className:s()(l().button,n),...i,children:t})};t.Z=o},48135:function(e,t,n){"use strict";var r=n(85893);let i=e=>{let{title:t,className:n}=e;return(0,r.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat((null==n?void 0:n.includes("xl"))?"":"text-3xl"," ").concat(n),children:t})};t.Z=i},80774:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(4754),i=n(81759);let s={getAll:async e=>i.ZP.get((0,r.Il)(""),{params:e?{searchTerm:e}:{}}),getProfile:async()=>i.ZP.get((0,r.Il)("/profile")),getFavorites:async()=>i.ZP.get((0,r.Il)("profile/favorites")),toggleFavorite:async e=>i.ZP.put((0,r.Il)("profile/favorites"),{movieId:e}),updateProfile:async e=>i.ZP.put((0,r.Il)("/profile"),e),getById:async e=>i.ZP.get((0,r.Il)("/".concat(e))),update:async(e,t)=>i.ZP.put((0,r.Il)("/".concat(e)),t),deleteUser:async e=>i.ZP.delete((0,r.Il)("/".concat(e)))}},79671:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(85893),i=n(9008),s=n.n(i),a=n(11163),l=n(28975);let o="Online cinema",c=e=>"".concat(e," | ").concat(o),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.replace(/<[^>]+>/g,"").replace(/&[^;]+>./g," ").replace(/([\u2700-\u27BF] | [\uE000-\uF8FF] | \uD83C[\uDC00-\uDFFF] | \uD83D[\uDC00-\uDFFF] | [\u2011-\u26FF] | \uD83E[\uDD10-\uDDFF])/g,"");return t&&(n=n.slice(0,t)+"..."),n};var d=n(83454);let m=e=>{let{title:t,description:n,image:i,children:m}=e,{asPath:_}=(0,a.useRouter)(),f="".concat(d.env.REACT_APP_URL).concat(_);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{itemProp:"headline",children:c(t)}),n?(0,r.jsxs)(s(),{children:[(0,r.jsx)("meta",{itemProp:"description",name:"description",content:u(n,152)}),(0,r.jsx)("link",{rel:"canonical",href:f}),(0,r.jsx)("meta",{property:"og:locale",content:"en"}),(0,r.jsx)("meta",{property:"og:title",content:c(t)}),(0,r.jsx)("meta",{property:"og:url",content:f}),(0,r.jsx)("meta",{property:"og:image",content:i||l.Z}),(0,r.jsx)("meta",{property:"og:site_name",content:o}),(0,r.jsx)("meta",{property:"og:description",content:u(n,197)})]}):(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),m]})};var _=m},58577:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(85893),i=n(66263),s=n(85903),a=n(98561),l=n(48135),o=n(79671),c=n(36470),u=n(13669),d=n(80774);let m=e=>new Date(e).toLocaleDateString("ru");var _=n(44460),f=n(67294),p=n(88767),x=n(16938);let v=()=>{let[e,t]=(0,f.useState)(""),n=(0,u.N)(e,500),r=(0,p.useQuery)(["user list",n],()=>d.W.getAll(n),{select:e=>{let{data:t}=e;return t.map(e=>({_id:e._id,editUrl:(0,c.A7)("user/edit/".concat(e._id)),items:[e.email,m(e.createdAt)]}))},onError:e=>{(0,_._)(e,"User list")}}),i=e=>{t(e.target.value)},{mutateAsync:s}=(0,p.useMutation)("delete user",e=>d.W.deleteUser(e),{onError:e=>{(0,_._)(e,"Delete User")},onSuccess:()=>{x.Rt.success("Delete user","User was deleted successful"),r.refetch()}});return(0,f.useMemo)(()=>({handleSearch:i,...r,searchTerm:e,deleteAsync:s}),[r,e,s])},h=()=>{let{isLoading:e,data:t,deleteAsync:n,searchTerm:c,handleSearch:u}=v();return(0,r.jsxs)(o.Z,{title:"Users",children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)(l.Z,{title:"Users"}),(0,r.jsx)(s.Z,{handleSearch:u,searchTerm:c}),(0,r.jsx)(a.Z,{isLoading:e,removeHandler:n,headerItems:["Email","Date register"],tableItems:t||[]})]})},j=()=>(0,r.jsx)(h,{});j.isOnlyAdmin=!0;var g=j},67933:function(e){e.exports={nav:"adminNavigation_nav___TpNr",active:"adminNavigation_active__da2_u"}},46652:function(e){e.exports={header:"adminHeader_header__EVL_f"}},47156:function(e){e.exports={actions:"adminTable_actions__2Z0V9",item:"adminTable_item__GRvwA",itemHeader:"adminTable_itemHeader__UVYFX",notFound:"adminTable_notFound__2tqmS"}},5130:function(e){e.exports={button:"form_button__yOLwy",common:"form_common__Y25KB",field:"form_field__MfP1o",uploadField:"form_uploadField__SfNcG",uploadFlex:"form_uploadFlex___EJSQ",uploadImageContainer:"form_uploadImageContainer__WmFzh",fade:"form_fade__luiBw",error:"form_error__sUS7j",editorWrapper:"form_editorWrapper__kd_SU",wrapper:"form_wrapper___Lju1",toolbar:"form_toolbar__nAnM_",editor:"form_editor__uwQTO"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=56520)}),_N_E=e.O()}]);