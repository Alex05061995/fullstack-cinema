(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{56896:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(37989)}])},59951:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(85893),o=r(76376);let l=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=e=>{let{register:t,formState:{errors:r},isPasswordRequired:s=!1}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{...t("email",{required:"Email is required!",pattern:{value:l,message:"Please enter a valid email"}}),placeholder:"E-mail",error:r.email}),(0,n.jsx)(o.Z,{...t("password",s?{required:"Password is required",minLength:{value:6,message:"Min length should be 6 symbols"}}:{}),type:"password",placeholder:"Password",error:r.password})]})};var a=s},48869:function(e,t,r){"use strict";var n=r(85893),o=r(94184),l=r.n(o),s=r(34359),a=r.n(s);let i=e=>{let{children:t,className:r,...o}=e;return(0,n.jsx)("button",{className:l()(a().button,r),...o,children:t})};t.Z=i},76376:function(e,t,r){"use strict";var n=r(85893),o=r(94184),l=r.n(o),s=r(67294),a=r(34359),i=r.n(a);let c=(0,s.forwardRef)((e,t)=>{var r;let{placeholder:o,error:s,type:a="text",style:c,...u}=e;return(0,n.jsxs)("div",{className:l()(i().common,i().field),style:c,children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:o}),(0,n.jsx)("input",{ref:t,type:a,...u})]}),s&&(0,n.jsx)("div",{className:i().error,children:null===(r=s.message)||void 0===r?void 0:r.toString()})]})});c.displayName="Field",t.Z=c},40077:function(e,t,r){"use strict";var n=r(85893);let o=e=>{let{title:t,className:r}=e;return(0,n.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat((null==r?void 0:r.includes("xl"))?"":"text-3xl"," ").concat(r),children:t})};t.Z=o},48974:function(e,t,r){"use strict";r.d(t,{W:function(){return l}});var n=r(18016),o=r(68707);let l={getAll:async e=>o.ZP.get((0,n.Il)(""),{params:e?{searchTerm:e}:{}}),getProfile:async()=>o.ZP.get((0,n.Il)("/profile")),getFavorites:async()=>o.ZP.get((0,n.Il)("profile/favorites")),toggleFavorite:async e=>o.ZP.put((0,n.Il)("profile/favorites"),{movieId:e}),updateProfile:async e=>o.ZP.put((0,n.Il)("/profile"),e),getById:async e=>o.ZP.get((0,n.Il)("/".concat(e))),update:async(e,t)=>o.ZP.put((0,n.Il)("/".concat(e)),t),deleteUser:async e=>o.ZP.delete((0,n.Il)("/".concat(e)))}},45495:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(85893),o=r(9008),l=r.n(o),s=r(11163),a=r(40865);let i="Online cinema",c=e=>"".concat(e," | ").concat(i),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.replace(/<[^>]+>/g,"").replace(/&[^;]+>./g," ").replace(/([\u2700-\u27BF] | [\uE000-\uF8FF] | \uD83C[\uDC00-\uDFFF] | \uD83D[\uDC00-\uDFFF] | [\u2011-\u26FF] | \uD83E[\uDD10-\uDDFF])/g,"");return t&&(r=r.slice(0,t)+"..."),r};var d=r(83454);let p=e=>{let{title:t,description:r,image:o,children:p}=e,{asPath:f}=(0,s.useRouter)(),m="".concat(d.env.REACT_APP_URL).concat(f);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{itemProp:"headline",children:c(t)}),r?(0,n.jsxs)(l(),{children:[(0,n.jsx)("meta",{itemProp:"description",name:"description",content:u(r,152)}),(0,n.jsx)("link",{rel:"canonical",href:m}),(0,n.jsx)("meta",{property:"og:locale",content:"en"}),(0,n.jsx)("meta",{property:"og:title",content:c(t)}),(0,n.jsx)("meta",{property:"og:url",content:m}),(0,n.jsx)("meta",{property:"og:image",content:o||a.Z}),(0,n.jsx)("meta",{property:"og:site_name",content:i}),(0,n.jsx)("meta",{property:"og:description",content:u(r,197)})]}):(0,n.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),p]})};var f=p},37989:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(85893),o=r(87536),l=r(48869),s=r(40077),a=r(4663),i=r(59951),c=r(82613),u=r.n(c),d=r(88767),p=r(48974),f=r(88116),m=r(16938);let _=e=>{let{isLoading:t}=(0,d.useQuery)(["profile"],()=>p.W.getProfile(),{onSuccess:t=>{let{data:r}=t;e("email",r.email)},onError:e=>{(0,f._)(e,"Get profile")}}),{mutateAsync:r}=(0,d.useMutation)("update user",e=>p.W.updateProfile(e),{onError:e=>{(0,f._)(e,"Update profile")},onSuccess:()=>{m.Rt.success("Update profile","Update was successful")}}),n=async e=>{await r(e)};return{onSubmit:n,isLoading:t}};var x=r(45495);let g=()=>{let{handleSubmit:e,register:t,formState:r,setValue:c}=(0,o.cI)({mode:"onChange"}),{isLoading:d,onSubmit:p}=_(c);return(0,n.jsxs)(x.Z,{title:"Profile",children:[(0,n.jsx)(s.Z,{title:"Profile",className:"mb-6"}),(0,n.jsxs)("form",{onSubmit:e(p),className:u().form,children:[d?(0,n.jsx)(a.Z,{count:2}):(0,n.jsx)(i.Z,{formState:r,register:t}),(0,n.jsx)(l.Z,{children:"Update"})]})]})},j=()=>(0,n.jsx)(g,{});j.isOnlyUser=!0;var h=j},82613:function(e){e.exports={form:"profile_form__GixSZ"}},34359:function(e){e.exports={button:"form_button__yOLwy",common:"form_common__Y25KB",field:"form_field__MfP1o",uploadField:"form_uploadField__SfNcG",uploadFlex:"form_uploadFlex___EJSQ",uploadImageContainer:"form_uploadImageContainer__WmFzh",fade:"form_fade__luiBw",error:"form_error__sUS7j",editorWrapper:"form_editorWrapper__kd_SU",wrapper:"form_wrapper___Lju1",toolbar:"form_toolbar__nAnM_",editor:"form_editor__uwQTO"}}},function(e){e.O(0,[536,774,888,179],function(){return e(e.s=56896)}),_N_E=e.O()}]);